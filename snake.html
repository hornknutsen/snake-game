<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake - Nokia Style</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #2c3e6b;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: 'Courier New', monospace;
  }
  .phone {
    background: #2f3542;
    border-radius: 20px;
    padding: 30px 20px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  }
  .screen {
    background: #a8c8e8;
    border: 4px solid #555;
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 20px;
  }
  .score-bar {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #1a3a5c;
    font-weight: bold;
    margin-bottom: 5px;
  }
  canvas {
    display: block;
    width: 300px;
    height: 300px;
    image-rendering: auto;
  }
  .controls {
    display: flex;
    justify-content: center;
    margin-top: 10px;
  }
  .dpad {
    display: grid;
    grid-template-columns: 50px 50px 50px;
    grid-template-rows: 50px 50px 50px;
    gap: 2px;
  }
  .dpad button {
    background: #57606f;
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: background 0.1s;
  }
  .dpad button:active { background: #747d8c; }
  .dpad .empty { background: transparent; }
  .overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: rgba(168, 200, 232, 0.85);
    color: #1a3a5c;
    font-weight: bold;
    font-size: 16px;
    text-align: center;
    line-height: 2;
  }
  .screen-inner {
    position: relative;
  }
</style>
</head>
<body>
<div class="phone">
  <div class="screen">
    <div class="score-bar">
      <span>SNAKE</span>
      <span id="score">Score: 0</span>
    </div>
    <div class="screen-inner">
      <canvas id="game" width="600" height="600"></canvas>
      <div class="overlay" id="overlay">
        <div>SNAKE</div>
        <div style="font-size:12px">Trykk en tast for å starte</div>
      </div>
    </div>
  </div>
  <div class="controls">
    <div class="dpad">
      <button class="empty"></button>
      <button onclick="setDir(0,-1)">&#9650;</button>
      <button class="empty"></button>
      <button onclick="setDir(-1,0)">&#9664;</button>
      <button class="empty"></button>
      <button onclick="setDir(1,0)">&#9654;</button>
      <button class="empty"></button>
      <button onclick="setDir(0,1)">&#9660;</button>
      <button class="empty"></button>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const overlay = document.getElementById('overlay');
const scoreEl = document.getElementById('score');

const GRID = 30;
const CELL = canvas.width / GRID;
const BG = '#a8c8e8';
const SNAKE_COLOR = '#1a3a5c';
const FOOD_COLOR = '#0a1f3a';

let snake, dir, nextDir, food, score, gameLoop, running;

function init() {
  snake = [{x:15,y:15},{x:14,y:15},{x:13,y:15}];
  dir = {x:1,y:0};
  nextDir = {x:1,y:0};
  score = 0;
  scoreEl.textContent = 'Score: 0';
  placeFood();
  running = true;
  overlay.style.display = 'none';
  if (gameLoop) clearInterval(gameLoop);
  gameLoop = setInterval(update, 130);
}

function placeFood() {
  do {
    food = {x: Math.floor(Math.random()*GRID), y: Math.floor(Math.random()*GRID)};
  } while (snake.some(s => s.x === food.x && s.y === food.y));
}

function setDir(x, y) {
  if (!running) { init(); return; }
  if (x === -dir.x && y === -dir.y) return;
  nextDir = {x, y};
}

function update() {
  dir = nextDir;
  const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};

  if (head.x < 0 || head.x >= GRID || head.y < 0 || head.y >= GRID ||
      snake.some(s => s.x === head.x && s.y === head.y)) {
    gameOver();
    return;
  }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    score += 10;
    scoreEl.textContent = 'Score: ' + score;
    placeFood();
  } else {
    snake.pop();
  }

  draw();
}

function roundRect(x, y, w, h, r) {
  ctx.beginPath();
  ctx.moveTo(x + r, y);
  ctx.lineTo(x + w - r, y);
  ctx.quadraticCurveTo(x + w, y, x + w, y + r);
  ctx.lineTo(x + w, y + h - r);
  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
  ctx.lineTo(x + r, y + h);
  ctx.quadraticCurveTo(x, y + h, x, y + h - r);
  ctx.lineTo(x, y + r);
  ctx.quadraticCurveTo(x, y, x + r, y);
  ctx.closePath();
  ctx.fill();
}

function draw() {
  ctx.fillStyle = BG;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw snake
  snake.forEach((s, i) => {
    const pad = 1;
    const x = s.x * CELL + pad;
    const y = s.y * CELL + pad;
    const size = CELL - pad * 2;
    const radius = i === 0 ? 6 : 4;
    ctx.fillStyle = i === 0 ? '#0f2d4a' : SNAKE_COLOR;
    roundRect(x, y, size, size, radius);
  });

  // Draw food as circle
  ctx.fillStyle = FOOD_COLOR;
  ctx.beginPath();
  ctx.arc(food.x * CELL + CELL / 2, food.y * CELL + CELL / 2, CELL / 2 - 3, 0, Math.PI * 2);
  ctx.fill();
}

function gameOver() {
  running = false;
  clearInterval(gameLoop);
  overlay.innerHTML = `<div>GAME OVER</div><div>Score: ${score}</div><div style="font-size:12px">Trykk en tast for å spille igjen</div>`;
  overlay.style.display = 'flex';
}

document.addEventListener('keydown', e => {
  switch(e.key) {
    case 'ArrowUp':    case 'w': setDir(0,-1); break;
    case 'ArrowDown':  case 's': setDir(0,1);  break;
    case 'ArrowLeft':  case 'a': setDir(-1,0); break;
    case 'ArrowRight': case 'd': setDir(1,0);  break;
  }
  if (!running) init();
});

draw();
</script>
</body>
</html>
